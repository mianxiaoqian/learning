<!--
 * @Author: qianqian.zhao
 * @Date: 2020-03-22 14:45:14
 * @LastEditors: qianqian.zhao
 * @LastEditTime: 2020-03-23 18:57:52
 * @Description: 原型记录
 -->

### 原型对象
是构造函数的一个属性prototype(原型)，存在堆内存中；
同时，原型对象有一个constructor属性指向自己的构造函数；

### 实例对象
每一个实例对象都有一个指向自己构造函数原型的指针__prpto__（原型链）;
实例对象的__proto__指向与构造函数的prototype属性指向一样；

### 构造函数
用来实例化对象，有一个prototype属性，指原型；

### js内置的构造函数
Object、Function、Array、String、Boolean、Number、RegExp
根据内置构造函数实例化的对象的原型指向构造函数的prototype属性
任何函数都是Function的实例；
Object也是Function的实例；
Function也是自己的实例；
任何对象都是Object的实例；Object.prototype对象的除外？因为Object.prototype.__proto__ = null;

### 结束条件
Object.prototype是所有对象的原型链的终点
Objetct.prototype.__proto__ === null

#### 手动实现一个new

``` javascript
function Person (name) {
  this.name = name
}
var p1 = new Person('棉花糖');

function createNew (Fun) {
  return function () {
    var obj = new Object();
    obj.__proto__ = Fun.prototype;
    Fun.call(obj, ...arguments);
    return obj;
  }
}
var p2 = createNew(Person)('辛巴');

```

### 类的实现
#### es6之前使用原型对象、构造函数来实现class
``` javascript
class Cat {
  constructor (name) {
    this.name = name;
  }
  // 以下两种写法分别会将方法定义到实例上和原型上
  // eat方法将被定义到实例上
  eat = function () {
    console.log('喵子会吃饭');
  }
  // drink方法将被定义到原型上
  drink () {
    console.log('喵子会喝水');
  }
}

var miao1 = new Cat('miao1');
var miao2 = new Cat('miao2');

// 类的es5实现
var asCat = (function () {
  function asCat(name) {
    this.name = name;
    this.eat = function () {
      console.log('喵子会吃饭');
    }
  }
  asCat.prototype.drink = function () {
    console.log('喵子会喝水');
  }
  return asCat;
}())

function createNew (Fun) {
  return function () {
    var obj = new Object();
    obj.__proto__ = Fun.prototype;
    Fun.call(obj, ...arguments);
    return obj;
  }
}

var miao3 = new asCat('miao3');
var miao4 = new asCat('miao4');
var miao5 = createNew(asCat)('miao5');
```
